@model IEnumerable<MindClinic.Models.DoctorClass>
@{
    ViewData["Title"] = "Home Page";
    var X = ViewBag.Doctor;
}

<section class="section section-search">
    <div class="container-fluid">
        <div class="banner-wrapper">
            <div class="banner-header text-center">
                <h1>Search Doctor, Make an Appointment</h1>
                <p>Discover the best doctors, clinic & hospital the city nearest to you.</p>
            </div>


            <!-- Search -->

            <form>
                <div style="padding-top:20px" class="input-group mb-3">
                    <input type="text" name="search" value="@ViewData["CurrentFilter"]" class="form-control" placeholder="Search for doctor's name, email ..">
                    <div class="input-group-append">
                        <button class="btn btn-outline-primary" asp-controller="Home" asp-action="SearchForDoctors" type="submit" id="submit" value="Submit"> <i class="fas fa-search"></i></button>
                    </div>
                </div>
            </form>


   @*         @using (Html.BeginForm("Index", "Home", FormMethod.Post))
            {

                <input id="txtDoctor" name="search" type="text" class="form-control" placeholder="Search Doctors">
                <input id="hfDoctor" name="DoctorId" type="hidden" class="form-control" placeholder="Search Doctors">
                <div id="hello"></div>
               <button type="submit" class="btn btn-primary search-btn"><i class="fas fa-search"></i> <span>Search</span></button>
                <input asp-action="SearchForDoctors" type="submit" id="submit" value="Submit" />
                <br />

                <br />


            }

            <script type="text/javascript">
                $(function () {
                    $("#txtDoctor").autocomplete({
                        source: function (request, response) {
                            $.ajax({
                                url: '/Home/AutoComplete/',
                                data: { "prefix": request.term },
                                type: "POST",
                                success: function (data) {
                                    response($.map(data,
                                        function (item) {

                                            return item;
                                        }))
                                },
                                error: function (response) {
                                    alert(response.responseText)
                                },
                                failure: function (response) {
                                    alert(response.responseText)
                                }
                            });
                        },
                        select: function (e, i) {
                            $("#hfDoctor").val(i.item.val);

                        },
                        minLength: 1
                    });
                });

            </script>
*@
        </div>
    </div>
</section>
<!-- /Home Banner -->
<!-- Clinic and Specialities -->
<section class="section section-specialities">
    <div class="container-fluid">
        <div class="section-header text-center">
            <h2>Clinic and Specialities</h2>
            <p class="sub-title">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-9">
                <!-- Slider -->
                <div class="specialities-slider slider">
                    <div class="speicality-item text-center">
                        <div class="speicality-img">
                            <img src="~/assets/img/specialities/specialities-02.png" class="img-fluid" alt="Speciality">
                            <span><i class="fa fa-circle" aria-hidden="true"></i></span>
                        </div>
                        <p>Neurology</p>
                    </div>


                </div>
                <!-- /Slider -->

            </div>
        </div>
    </div>
</section>
<!-- Clinic and Specialities -->
<!-- Popular Section -->
<section class="section section-doctor">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-4">
                <div class="section-header ">
                    <h2>Featured Doctors</h2>
                    <p>Check out some of our best-rated doctors.</p>
                </div>
                <div class="about-content">
                    <p>Shown here are some of our best-rated experienced therapists who can help you with a range of issues, including depression, anxiety, relationships, trauma, grief, and more.</p>
                    <p>Our therapists offer therapy services via third-party calls, live chats, and email messaging. We help you to to find and schedule an appointment with someone that’s right for you and your needs.</p>
                    <a asp-action="SearchForDoctors" asp-controller="Home">All Doctors</a>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="doctor-slider slider">
                    @foreach (var item in Model)
                    {
                        if (item.AvgRating >= 4)
                        {
                            <!-- Doctor Widget -->
                            <div class="profile-widget">
                                <div class="doc-img ">

                                    <a href="doctor-profile.html">
                                        <img width="300" height="200" alt="User Image" src="~/Doctorsimage/@(item.User.image?? "Default.jpg")">
                                    </a>

                                    <a href="javascript:void(0)" class="fav-btn">
                                        <i class="far fa-bookmark"></i>
                                    </a>
                                </div>
                                <div class="pro-content">
                                    <h3 class="title">
                                        <a asp-action="DoctorViewProfile" asp-controller="DoctorClasses" asp-route-id="@item.User.Id">@item.User.Name</a>
                                        <i class="fas fa-check-circle verified"></i>
                                    </h3>
                                    <p class="speciality">MDS - Periodontology and Oral Implantology, BDS</p>
                                    <ul class="available-info">
                                        <li>
                                            <div class="rating">
                                                @for (int i = 0; i < 5; i++)
                                                {
                                                    if (i < @item.AvgRating)
                                                    {
                                                        <i class="fas fa-star filled"></i>
                                                    }
                                                    else
                                                    {
                                                        <i class="fas fa-star"></i>
                                                    }
                                                }

                                                <span class="d-inline-block average-rating">(@item.RatingsCount)</span>
                                            </div></li>
                                        <li>
                                            <i class="fas fa-map-marker-alt"></i> @item.User.Gender
                                        </li>
                                        <li>
                                            <i class="far fa-clock"></i> @item.User.Age
                                        </li>
                                        <li>
                                            <i class="far fa-money-bill-alt"></i> $@item.pricePerSession
                                            <i class="fas fa-info-circle" data-toggle="tooltip" title="Lorem Ipsum"></i>
                                        </li>

                                    </ul>
                                    <div class="row row-sm">
                                        <div class="col-6">

                                            <a asp-action="DoctorViewProfile" asp-controller="DoctorClasses" asp-route-id="@item.User.Id" class="btn view-btn">View Profile</a>
                                        </div>
                                        <div class="col-6">
                                            <a asp-action="getslots" asp-controller="Appointments" asp-route-id="@item.User.Id" class="btn book-btn">Book Now</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /Doctor Widget -->
                        }
                    }




                </div>
            </div>
        </div>
    </div>
</section>
<!-- /Popular Section -->
<!-- Availabe Features -->
<section class="section section-features">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-5 features-img">
                <img src="~/assets/img/features/feature.png" class="img-fluid" alt="Feature">
            </div>
            <div class="col-md-7">
                <div class="section-header">
                    <h2 class="mt-2">Availabe Features in Our Clinic</h2>
                    <p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. </p>
                </div>
                <div class="features-slider slider">
                    <!-- Slider Item -->
                    <div class="feature-item text-center">
                        <img src="~/assets/img/features/feature-01.jpg" class="img-fluid" alt="Feature">
                        <p>Patient Ward</p>
                    </div>
                    <!-- /Slider Item -->
                    <!-- Slider Item -->
                    <div class="feature-item text-center">
                        <img src="~/assets/img/features/feature-02.jpg" class="img-fluid" alt="Feature">
                        <p>Test Room</p>
                    </div>
                    <!-- /Slider Item -->
                    <!-- Slider Item -->
                    <div class="feature-item text-center">
                        <img src="~/assets/img/features/feature-03.jpg" class="img-fluid" alt="Feature">
                        <p>ICU</p>
                    </div>
                    <!-- /Slider Item -->
                    <!-- Slider Item -->
                    <div class="feature-item text-center">
                        <img src="~/assets/img/features/feature-04.jpg" class="img-fluid" alt="Feature">
                        <p>Laboratory</p>
                    </div>
                    <!-- /Slider Item -->
                    <!-- Slider Item -->
                    <div class="feature-item text-center">
                        <img src="~/assets/img/features/feature-05.jpg" class="img-fluid" alt="Feature">
                        <p>Operation</p>
                    </div>
                    <!-- /Slider Item -->
                    <!-- Slider Item -->
                    <div class="feature-item text-center">
                        <img src="~/assets/img/features/feature-06.jpg" class="img-fluid" alt="Feature">
                        <p>Medical</p>
                    </div>
                    <!-- /Slider Item -->
                </div>
            </div>
        </div>
    </div>
</section>


